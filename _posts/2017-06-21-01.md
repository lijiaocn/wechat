---

createtime: 2017-06-21 13:22:51+00:00
categories: flashsky
channel_desc: "Flashky，真名方兴，windows漏洞挖掘骨灰级专家"
channel_ercode: ""
channel_id: !!python/unicode 'flashsky'
channel_name: 我的安全之路
channel_photo: !!python/unicode 'img/add-flashsky.photo.png'
keywords: !!python/str '方兴,flashsky,我的安全之路'
language: chinese
layout: 1_0_post
tags: !!python/unicode 'specialserial'

title: 我的安全之路12-安全研究生涯之冲击波-2003
description: 于是，我来到A公司。A公司是一家在北京做安全的小公司，他们的总工一直和我在QQ上有联系，所以我很快就进去了，里面还有几个技术不错的人，其实我来这也就是混个过年，开年再想办法，其实我很感谢

---

于是，我来到A公司。A公司是一家在北京做安全的小公司，他们的总工一直和我在QQ上有联系，所以我很快就进去了，里面还有几个技术不错的人，其实我来这也就是混个过年，开年再想办法，其实我很感谢这位总工，很明显他也知道我的这种想法，知道我在A公司呆不长，但还是让我进去混了一个月的工资，春节放假时还给我发了1000块的红包。还破天荒带我去和YUANGE吃了个饭介绍了我一下，当时YUANGE已经是安全技术圈子里的神话，当然没有听说过我。所以后面就是总工和YUANGE在上面侃侃而谈，我就在下面大口吃肉。顺便提下YUANGE，YUANGE让我影响最深刻的一篇文章是02年就有一篇关于UNICODE短整数表示长度的方式会有可能触发溢出的文章。若干年之后，某个知名0DAY漏洞爆光，我马上就联想到了这篇文章，看来当年YUANGE写这篇文章时，很大可能就已经藏着了这个0DAY。

在A公司也杂七杂八做了一些活，这个时候，我开始通过汇编逆向加动态调试方式，分析了多个微软未公开的协议，如SQL的TDS的协议。另外就是首届XCON开了，我凑了个<溢出植入型的木马>做为议题，参加了XCON，这个想法其实我觉得还是非常有意思的，不过后来基本不碰木马的方向了，也就没怎么研究了。议题结束时候，有幸被WRANG3大牛问了几个尖锐的问题，仓促应对完狼狈下场。会上也认识了不少安全技术圈的人，还有ILSY，当然是相逢一笑泯恩仇。

混过了年，再回到北京，我先委托STARDUST帮我介绍去绿盟，不过很久也没回复。看看自己的口袋，也急了，这时STONE对我说可以介绍我去启明，于是我就来到了启明应聘。比想象中简单，很快我就进到启明的攻防实验室。开始做漏洞分析的一些技术研究。当时分析了很多缺乏技术说明的漏洞公告，这个阶段，让我对安全漏洞机智和攻击手段有了更多了解。虽然接着就碰到了SARS，在家呆了很久，还是写了大量的漏洞机制分析发布在XFOCUS的内部论坛。7月份，微软的MS03-26漏洞公告通报RPC DCOM有严重的远程安全漏洞，当时所有的WINDOWS操作系统都受影响。鉴于此漏洞的严重程度，微软和发现此漏洞的LSD组织都不给出任何细节，这意味着安全厂商必须自己去分析安全漏洞机理。  

当时还没有BINDIFF这样的工具，漏洞的分析和重现靠人工分析，所以当时漏洞补丁到分析出来的周期大致是20天以上。攻防实验室经理的蔡晶晶对我说，赶快去分析吧，这可能是WINDOWS历史上最严重的安全漏洞。于是我开始了独自的分析和调试，3天后，发现了一个新的RPC拒绝服务漏洞，5，6天后终于再现了这个漏洞。漏洞分析文章写出来了。于是我找BENJURRY和XUNDI帮助翻译和增加了一些其他系统的JMP CODE，以XFOCUS的名义投寄到BUGTRAP上。我也没想到这一投寄，引起了很大的风浪，这是世界上第一个公布的该漏洞细节的文章，被美国的HDMORE修改后转载，很快在安全社区到处流传。由于那个时候绝大部分用户还没有打补丁的习惯。因此就意味着这个漏洞会影响当时很多WINDOWS系统，可能会形成蠕虫;微软立刻召开了记者会指责XFOCUS没有通知他们就发布了这篇文章。BUGTRAP上，全世界黑客都在用此文章给出的POC进行修改、验证。8月初，冲击波蠕虫如期而来，瞬间影响了上千万台主机，随后还有数十个蠕虫使用了这个漏洞，造成了巨大的损失，XFOCUS组织也被推到风口浪尖上。国内外的批评紧跟而来，我只接受了一个国内媒体的采访，阐述了我的看法：安全不是靠黑客不知道来保证的。这是一个针对已经修补的漏洞的技术分析文章，他不触犯任何法律和安全行业行规，因为漏洞已经被厂商修复，但是用户缺乏打补丁的意识导致的，降低用户损失的关键是教育用户及时打补丁。之后当BINDIFF这样的工具出现之后，重大漏洞从补丁到分析出来的时间周期已经缩短到3天，但用户打补丁的意识却被教育起来之后，安全损失则会大大降低。

当然冲击波事件，也让我开始正视，作为安全人员，一些行为确实可能会给用户带来危害。不可否认，我发布的POC被冲击波直接利用到冲击波代码里，虽然发布它们不违反法律和行规，但确实应该多考虑一下事件之后可能带来的损失。可以更加专业和职业一些，这是我在冲击波事件中学到的东西。 

但无论如何，这篇技术分析文章让我正式成为一个被安全圈认可的安全研究人员，我以前的文章也开始被人关注。我2002年发现的2个微软的安全漏洞，当时由于给微软漏洞接收组发邮件，3个月都没收到回复，所以就公布在了XFOCUS的文章里，也没什么人关注。但是冲击波后不久，我发现居然被国外一个安全研究组织一起上报给了微软并修复了。我虽然没有完全的证据，但猜测应该是看了我的文章，想到这些老外也得折腾看我们汉语写的文章，也算为汉语普及做了点贡献。冲击波事件里，我应该感激的人包括:蔡晶晶，启明的领导，BENJURRY和XUNDI，帮助我翻译，并增加了一些JMP CODE并发布到BUGTRAP上。XFOCUS的其他兄弟，在我遭受指责时和我共同承担了指责。  

----

方兴，原翰海源创始人，现任阿里巴巴资深安全专家，作为国内漏洞挖掘领域最顶尖的黑客，他被更多人所熟知的则是他的别号：flashsky（闪空）。他是数百个高危级安全漏洞的发现者，而关于他的故事，最著名的莫过于2003年由他发布的微软史上最为严重的LSD PRC DCOM漏洞，后者直接导致之后“冲击波”病毒在全球范围内疯狂肆虐。

----

鼹鼠看看推荐语:

	辉煌的背后是寂寞无声的工作。
